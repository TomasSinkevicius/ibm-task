{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tomas/Documents/Github/IBM/ibm-task/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tomas/Documents/Github/IBM/ibm-task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/tomas/Documents/Github/IBM/ibm-task/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/tomas/Documents/Github/IBM/ibm-task/src/components/company-profiles/company-profiles.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport * as Styled from \"./styles\";\nimport React, { useState } from \"react\";\nimport { validateDate } from \"../../validator/company-profiles\";\nimport axios from \"axios\";\nimport { StockCandles } from \"../stock-candles/stock-candles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var CompanyProfiles = function CompanyProfiles(_ref) {\n  _s();\n\n  var companyProfileValues = _ref.companyProfileValues,\n      count = _ref.count,\n      getCompanyProfiles = _ref.getCompanyProfiles,\n      symbols = _ref.symbols,\n      searchValue = _ref.searchValue,\n      setErrors = _ref.setErrors;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      stockCandles = _useState2[0],\n      setStockCandles = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      index = _useState4[0],\n      setIndex = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      interval = _useState6[0],\n      setInterval = _useState6[1];\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var validationResults, responseCandles;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              validationResults = validateDate(searchValue, setErrors);\n\n              if (!(Object.keys(validationResults).length === 0)) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.prev = 2;\n              _context.next = 5;\n              return getStockCandles();\n\n            case 5:\n              responseCandles = _context.sent;\n              setStockCandles(responseCandles);\n              setIndex(1);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function handleClick() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getStockCandles = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                var FINNGUB_STOCK_CANDLES_API = \"\".concat(process.env.REACT_APP_FINNHUB_STOCK_CANDLES_API, \"?symbol=\").concat(searchValue.name, \"&resolution=D&from=\").concat(searchValue.dateFrom, \"&to=\").concat(searchValue.dateTo, \"&token=\").concat(process.env.REACT_APP_FINNHUB_TOKEN);\n                axios.get(FINNGUB_STOCK_CANDLES_API).then(function (response) {\n                  resolve(response.data);\n                })[\"catch\"](function (err) {\n                  return reject(err);\n                });\n              }));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getStockCandles() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var fetchStockCandles = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var responseCandles;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return getStockCandles();\n\n            case 3:\n              responseCandles = _context3.sent;\n              setStockCandles(responseCandles);\n              setIndex(1);\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    return function fetchStockCandles() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    first;\n    return function () {\n      second;\n    };\n  }, [interval]);\n  return /*#__PURE__*/_jsxDEV(Styled.Section, {\n    children: index === 1 ? /*#__PURE__*/_jsxDEV(StockCandles, {\n      setIndex: setIndex,\n      stockCandles: stockCandles,\n      setInterval: setInterval\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Styled.TilesContainer, {\n        children: companyProfileValues === null || companyProfileValues === void 0 ? void 0 : companyProfileValues.map(function (companyProfile, index) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"single-tile\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleClick,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"name : \", companyProfile.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"country : \", companyProfile.country]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"currency : \", companyProfile.currency]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"web url : \", companyProfile.weburl]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, _this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, _this), companyProfileValues.length < count && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          return getCompanyProfiles(symbols, companyProfileValues.length + 1, companyProfileValues.length + 5);\n        },\n        children: \"Get more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CompanyProfiles, \"hYV/0mKox2kdJCxXeA1dmMScPTI=\");\n\n_c = CompanyProfiles;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompanyProfiles\");","map":{"version":3,"names":["Styled","React","useState","validateDate","axios","StockCandles","CompanyProfiles","companyProfileValues","count","getCompanyProfiles","symbols","searchValue","setErrors","stockCandles","setStockCandles","index","setIndex","interval","setInterval","handleClick","validationResults","Object","keys","length","getStockCandles","responseCandles","console","log","Promise","resolve","reject","FINNGUB_STOCK_CANDLES_API","process","env","REACT_APP_FINNHUB_STOCK_CANDLES_API","name","dateFrom","dateTo","REACT_APP_FINNHUB_TOKEN","get","then","response","data","err","fetchStockCandles","useEffect","first","second","map","companyProfile","country","currency","weburl"],"sources":["/Users/tomas/Documents/Github/IBM/ibm-task/src/components/company-profiles/company-profiles.jsx"],"sourcesContent":["import * as Styled from \"./styles\";\nimport React, { useState } from \"react\";\nimport { validateDate } from \"../../validator/company-profiles\";\nimport axios from \"axios\";\nimport { StockCandles } from \"../stock-candles/stock-candles\";\n\nexport const CompanyProfiles = ({\n  companyProfileValues,\n  count,\n  getCompanyProfiles,\n  symbols,\n  searchValue,\n  setErrors,\n}) => {\n  const [stockCandles, setStockCandles] = useState({});\n  const [index, setIndex] = useState(0);\n  const [interval, setInterval] = useState(0);\n\n  const handleClick = async () => {\n    let validationResults = validateDate(searchValue, setErrors);\n\n    if (Object.keys(validationResults).length === 0) {\n      try {\n        const responseCandles = await getStockCandles();\n        setStockCandles(responseCandles);\n        setIndex(1);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const getStockCandles = async () => {\n    return new Promise((resolve, reject) => {\n      const FINNGUB_STOCK_CANDLES_API = `${process.env.REACT_APP_FINNHUB_STOCK_CANDLES_API}?symbol=${searchValue.name}&resolution=D&from=${searchValue.dateFrom}&to=${searchValue.dateTo}&token=${process.env.REACT_APP_FINNHUB_TOKEN}`;\n\n      axios\n        .get(FINNGUB_STOCK_CANDLES_API)\n        .then((response) => {\n          resolve(response.data);\n        })\n        .catch((err) => reject(err));\n    });\n  };\n\n  const fetchStockCandles = async () => {\n    try {\n      const responseCandles = await getStockCandles();\n      setStockCandles(responseCandles);\n      setIndex(1);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    first;\n\n    return () => {\n      second;\n    };\n  }, [interval]);\n\n  return (\n    <Styled.Section>\n      {index === 1 ? (\n        <StockCandles\n          setIndex={setIndex}\n          stockCandles={stockCandles}\n          setInterval={setInterval}\n        />\n      ) : (\n        <>\n          <Styled.TilesContainer>\n            {companyProfileValues?.map((companyProfile, index) => (\n              <div key={index} className=\"single-tile\">\n                <button onClick={handleClick}>\n                  <p>name : {companyProfile.name}</p>\n                </button>\n                <p>country : {companyProfile.country}</p>\n                <p>currency : {companyProfile.currency}</p>\n                <p>web url : {companyProfile.weburl}</p>\n              </div>\n            ))}\n          </Styled.TilesContainer>\n          {companyProfileValues.length < count && (\n            <button\n              onClick={() =>\n                getCompanyProfiles(\n                  symbols,\n                  companyProfileValues.length + 1,\n                  companyProfileValues.length + 5\n                )\n              }\n            >\n              Get more\n            </button>\n          )}\n        </>\n      )}\n    </Styled.Section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}